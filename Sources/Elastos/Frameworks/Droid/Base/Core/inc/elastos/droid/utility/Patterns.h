//=========================================================================
// Copyright (C) 2012 The Elastos Open Source Project
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//=========================================================================

#ifndef __ELASTOS_DROID_UTILITY_PATTERNS_H__
#define __ELASTOS_DROID_UTILITY_PATTERNS_H__

#include <Elastos.CoreLibrary.h>

using Elastos::Utility::Regex::IMatcher;
using Elastos::Utility::Regex::IPattern;

namespace Elastos {
namespace Droid {
namespace Utility {

/**
 * Commonly used regular expression patterns.
 */
class Patterns
{
private:
    /**
     * Do not create this static utility class.
     */
    Patterns();
    Patterns(const Patterns& other);

public:
    /**
     *  Regular expression to match all IANA top-level domains.
     *  List accurate as of 2011/07/18.  List taken from:
     *  http://data.iana.org/TLD/tlds-alpha-by-domain.txt
     *  This pattern is auto-generated by frameworks/ex/common/tools/make-iana-tld-pattern.py
     *
     *  @deprecated Due to the recent profileration of gTLDs, this API is
     *  expected to become out-of-date very quickly. Therefore it is now
     *  deprecated.
     */
    //@Deprecated
    static const String TOP_LEVEL_DOMAIN_STR;

    /**
     *  Regular expression pattern to match all IANA top-level domains.
     *  @deprecated This API is deprecated. See {@link #TOP_LEVEL_DOMAIN_STR}.
     */
    //@Deprecated
    static const AutoPtr<IPattern> TOP_LEVEL_DOMAIN;

    /**
     *  Regular expression to match all IANA top-level domains for WEB_URL.
     *  List accurate as of 2011/07/18.  List taken from:
     *  http://data.iana.org/TLD/tlds-alpha-by-domain.txt
     *  This pattern is auto-generated by frameworks/ex/common/tools/make-iana-tld-pattern.py
     */
    static const String TOP_LEVEL_DOMAIN_STR_FOR_WEB_URL;

    /**
     * Good characters for Internationalized Resource Identifiers (IRI).
     * This comprises most common used Unicode characters allowed in IRI
     * as detailed in RFC 3987.
     * Specifically, those two byte Unicode characters are not included.
     */
    static const String GOOD_IRI_CHAR;

    /**
     *  Regular expression pattern to match most part of RFC 3987
     *  Internationalized URLs, aka IRIs.  Commonly used Unicode characters are
     *  added.
     */
    static const AutoPtr<IPattern> WEB_URL;

    static const AutoPtr<IPattern> IP_ADDRESS;

    static const AutoPtr<IPattern> DOMAIN_NAME;

    static const AutoPtr<IPattern> EMAIL_ADDRESS;

    /**
     * This pattern is intended for searching for things that look like they
     * might be phone numbers in arbitrary text, not for validating whether
     * something is in fact a phone number.  It will miss many things that
     * are legitimate phone numbers.
     *
     * <p> The pattern matches the following:
     * <ul>
     * <li>Optionally, a + sign followed immediately by one or more digits. Spaces, dots, or dashes
     * may follow.
     * <li>Optionally, sets of digits in parentheses, separated by spaces, dots, or dashes.
     * <li>A string starting and ending with a digit, containing digits, spaces, dots, and/or dashes.
     * </ul>
     */
    static const AutoPtr<IPattern> PHONE;

    // /**
    //  * RFC 1035 Section 2.3.4 limits the labels to a maximum 63 octets.
    //  */
    // private static final String IRI
    //     = "[" + GOOD_IRI_CHAR + "]([" + GOOD_IRI_CHAR + "\\-]{0,61}[" + GOOD_IRI_CHAR + "]){0,1}";

    // private static final String GOOD_GTLD_CHAR =
    //     "a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF";
    // private static final String GTLD = "[" + GOOD_GTLD_CHAR + "]{2,63}";
    // private static final String HOST_NAME = "(" + IRI + "\\.)+" + GTLD;

    // public static final Pattern DOMAIN_NAME
    //     = Pattern.compile("(" + HOST_NAME + "|" + IP_ADDRESS + ")");

public:
    /**
     *  Convenience method to take all of the non-null matching groups in a
     *  regex Matcher and return them as a concatenated string.
     *
     *  @param matcher      The Matcher object from which grouped text will
     *                      be extracted
     *
     *  @return             A String comprising all of the non-null matched
     *                      groups concatenated together
     */
    static String ConcatGroups(
        /* [in] */ IMatcher* matcher);

    /**
     * Convenience method to return only the digits and plus signs
     * in the matching string.
     *
     * @param matcher      The Matcher object from which digits and plus will
     *                     be extracted
     *
     * @return             A String comprising all of the digits and plus in
     *                     the match
     */
    static String DigitsAndPlusOnly(
        /* [in] */ IMatcher* matcher);
};

}
}
}

#endif //__ELASTOS_DROID_UTILITY_PATTERNS_H__
